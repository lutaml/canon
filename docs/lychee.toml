# Lychee Link Checker Configuration
# For Canon Documentation
# https://github.com/lycheeverse/lychee

# Cache results to avoid re-checking same URLs
cache = true
max_cache_age = "1d"

# Check both source files and built site
include_verbatim = true

# Recursively check all files
recursive = true

# File types to check
include = [
  "_site/**/*.html"
]

# Excluded paths
exclude = [
  ".git",
  ".github",
  "node_modules",
  "vendor",
  ".bundle",
  ".sass-cache",
  ".jekyll-cache"
]

# Link checking behavior
max_redirects = 10
max_retries = 3
timeout = 30

# Accept status codes
accept = [
  "100..=103",  # Informational
  "200..=299",  # Success
  "429"         # Too Many Requests (retry handled by max_retries)
]

# User agent to identify ourselves
user_agent = "lychee/canon-docs-link-checker"

# Check HTTP, HTTPS, and file:// schemes
scheme = ["https", "http", "file"]

# Include file:// URLs for local link checking
include_file = true

# Handle different link types
include_mail = false  # Don't check mailto: links

# Maximum concurrent requests
max_concurrency = 10

# Verbose output for debugging
verbose = "info"

# Require HTTPS where possible
require_https = false  # Don't enforce

# Index files
index_files = ["index.html"]